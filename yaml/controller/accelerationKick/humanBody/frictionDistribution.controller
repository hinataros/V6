# @author Ryotaro Hinata 2019

angle unit: degree

controller:
  control model: humanBody
  driven: flow
  trigger: check foot contact
  input: torque

  default:
    control method:
      inverse dynamics controller: fullDynamicsController

      operational space controller: decomposeEndEffectorAcceleration
      motion controller: mixedGeneralizedMomentum

      momentum controller: centroidalVrpMomentum
      force controller: centroidalDcmDistribution
      
      #force controller: centroidalDistribution #hamano
      # force controller: centroidalEcmpDistribution

      torque controller: mixedmixedOpt

    desired value generator:
      DCM: {name: CP}
      base rotation: {name: CP}
      control node translation:
        RLEGEE: {num: 0, name: CP}
        # RARMEE: {num: 1, name: CP}
        # LARMEE: {num: 2, name: CP}
      control node rotation:
        RLEGEE: {num: 0, name: CP}
        # RARMEE: {num: 1, name: CP}
        # LARMEE: {num: 2, name: CP}

    feedback controller:
      CoM: dcmControl
      
    KX: 3.e+2

    KpwB: 3.e+2
    KdwB: 5.e+1

    KDth: 1.e+3

    # KDlC: 5.e+1

  state:
    -
      # init
      # ********************************************
    -
      # double stance
      # proactive
      Bc:
        RLEGEE: [1, 1, 1, 1, 1, 1]
        LLEGEE: [1, 1, 1, 1, 1, 1]
        RARMEE: [0, 0, 0, 0, 0, 0]
        LARMEE: [0, 0, 0, 0, 0, 0]
          
      Bm:
        RLEGEE: [0, 0, 0, 0, 0, 0]
        LLEGEE: [0, 0, 0, 0, 0, 0]
        RARMEE: [0, 0, 0, 0, 0, 0]
        LARMEE: [0, 0, 0, 0, 0, 0]
      # ********************************************
    -
      # left leg stand
      # proactive
      Bc:
        RLEGEE: [0, 0, 0, 0, 0, 0]
        LLEGEE: [1, 1, 1, 1, 1, 1]
        RARMEE: [0, 0, 0, 0, 0, 0]
        LARMEE: [0, 0, 0, 0, 0, 0]
          
      Bm:
        RLEGEE: [1, 1, 1, 1, 1, 1]
        LLEGEE: [0, 0, 0, 0, 0, 0]
        RARMEE: [0, 0, 0, 0, 0, 0]
        LARMEE: [0, 0, 0, 0, 0, 0]
      # ********************************************
    -
      # right leg stand
      # proactive
      Bc:
        RLEGEE: [1, 1, 1, 1, 1, 1]
        LLEGEE: [0, 0, 0, 0, 0, 0]
        RARMEE: [0, 0, 0, 0, 0, 0]
        LARMEE: [0, 0, 0, 0, 0, 0]
          
      Bm:
        RLEGEE: [0, 0, 0, 0, 0, 0]
        LLEGEE: [1, 1, 1, 1, 1, 1]
        RARMEE: [0, 0, 0, 0, 0, 0]
        LARMEE: [0, 0, 0, 0, 0, 0]
      # ********************************************

  sequence:
    -
      -
        twf: 1.0
        Bc:
          RLEGEE: [1, 1, 1, 1, 1, 1]
          LLEGEE: [1, 1, 1, 1, 1, 1]

      -
        twf: 2.0
        control method:
          ext motion controller: true
          motion controller: RAA_fullBase
          ext momentum controller: true
          momentum controller: vrp_MobilityCompensation
          # momentum controller: vrp_Damper

          torque controller: mixed

      -
        twf: 1
        rXf: [0, 0.07, 0]
        # rCf: [0, 0.02, 0]
        
      -
        twf: 1.0
        Bc:
          RLEGEE: [0, 0, 0, 0, 0, 0]
          LLEGEE: [1, 1, 1, 1, 1, 1]
          
        Bm:
          RLEGEE: [1, 1, 1, 1, 1, 1]
          LLEGEE: [0, 0, 0, 0, 0, 0]
        rf:
          RLEGEE: [0., 0., 0.1]

        Kpv:
          RLEGEE: 3.e+2
          LLEGEE: 3.e+2
        Kdv:
          RLEGEE: 5.e+1
          LLEGEE: 5.e+1
        Kpw:
          RLEGEE: 3.e+2
          LLEGEE: 3.e+2
        Kdw:
          RLEGEE: 5.e+1
          LLEGEE: 5.e+1
          
        # KdwB: 5
          
      -
        twf: 5.0
        KX: 0
        # KpwB: 0
        # KdwB: 5.
        rf:
          RLEGEE: [-0.5, -0.2, 0.5]
        xif:
          RLEGEE: [0., 60, -15]

      -
        twf: 5
        desired value generator:
          control node translation:
            RLEGEE: {num: 0, name: circle}

        rf:
          RLEGEE: [0.5, 0., 0.085]
        xif:
          RLEGEE: [10., -45, -15]

      # -
      #   twf: 0.5
      -
        twf: 1.0
        # KPth: 0
        # Bm:
        #   RLEGEE: [0, 0, 0, 0, 0, 0]
