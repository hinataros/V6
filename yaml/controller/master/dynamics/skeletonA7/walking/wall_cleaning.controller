# @author Sho Miyahara 2018

angle unit: degree

controller:
  control model: skeletonA7SF
  input: torque
  # driven: mix
  # trigger: check contact

  default:
    control method:
      inverse dynamics controller: fullDynamicsController

      operational space controller: decomposeEndEffectorAcceleration
      motion controller: mixedGeneralizedMomentum

      momentum controller: centroidalDcmMomentum
      force controller: centroidalEcmpDistribution

      torque controller: mixedOpt

    desired value generator:
      DCM: {name: CP}
      base rotation: {name: CP}

      control node translation:
        # RARMEE: {num: 0, name: CP}
        RARMEE: {name: CPabs}
        LARMEE: {name: CPabs}
        LLEGEE: {name: CP}
      control node rotation:
        # RARMEE: {num: 0, name: CP}
        RARMEE: {name: CPabs}
        LARMEE: {name: CP}

      control node force:
        RARMEE: {name: CP}

    Bc:
      RLEGEE: [1, 1, 1, 1, 1, 1]
      LLEGEE: [1, 1, 1, 1, 1, 1]

    KX: 3.e+2

    KpwB: 3.e+2
    KdwB: 5.e+1
    # KpwB: 10.
    # KdwB: 5.

    Kpv:
      RARMEE: 3.e+2
      # LARMEE: 3.e+2
      LLEGEE: 3.e+2
    Kpw:
      RARMEE: 3.e+3
      # LARMEE: 3.e+2
      LLEGEE: 3.e+3

    Kdv:
      RARMEE: 1.e+1
      # LARMEE: 5.e+1
      LLEGEE: 1.e+1
    Kdw:
      RARMEE: 1.e+1
      # LARMEE: 5.e+1
      LLEGEE: 1.e+1

    # Kpp: 1.e+1

    # KDlC: 5.e+1
    kDth: &kDthH 1.e+1
    kthHinit: &kthHinit 1.e+2
    KDth:
      [0.,0.,0.,0.,0.,0., 0.,0.,0.,0.,0.,0.,
      *kDthH, *kDthH, *kDthH, *kDthH, *kDthH, *kDthH, *kDthH,
      *kDthH, *kDthH, *kDthH, *kDthH, *kDthH, *kDthH, *kDthH]

    Kthinit:
      [0.,0.,0.,0.,0.,0., 0.,0.,0.,0.,0.,0.,
      0.,0.,0.,0.,0.,0.,0.,
      # *kthHinit, *kthHinit, *kthHinit, *kthHinit, *kthHinit, *kthHinit, *kthHinit,
      *kthHinit, *kthHinit, *kthHinit, *kthHinit, *kthHinit, *kthHinit, *kthHinit]

  State:
    -
      control method:
        inverse dynamics controller: default
      Bc:
        RLEGEE: [0, 0, 0, 0, 0, 0]
        LLEGEE: [0, 0, 0, 0, 0, 0]
        RARMEE: [0, 0, 0, 0, 0, 0]
      Bm:
        RLEGEE: [0, 0, 0, 0, 0, 0]
        LLEGEE: [0, 0, 0, 0, 0, 0]
        RARMEE: [0, 0, 0, 0, 0, 0]
    -
      control method:
        inverse dynamics controller: fullDynamicsController
        force controller: centroidalEcmpDistribution
      Bc:
        RLEGEE: [1, 1, 1, 1, 1, 1]
        LLEGEE: [1, 1, 1, 1, 1, 1]
        RARMEE: [0, 0, 0, 0, 0, 0]
      Bm:
        RLEGEE: [0, 0, 0, 0, 0, 0]
        LLEGEE: [0, 0, 0, 0, 0, 0]
        RARMEE: [0, 0, 0, 0, 0, 0]
    -
      control method:
        inverse dynamics controller: fullDynamicsController
        force controller: centroidalEcmpDistribution
      Bc: &ls
        RLEGEE: [0, 0, 0, 0, 0, 0]
        LLEGEE: [1, 1, 1, 1, 1, 1]
        RARMEE: [0, 0, 0, 0, 0, 0]
      Bm: &rs
        RLEGEE: [1, 1, 1, 1, 1, 1]
        LLEGEE: [0, 0, 0, 0, 0, 0]
        RARMEE: [0, 0, 0, 0, 0, 0]
    -
      control method:
        inverse dynamics controller: fullDynamicsController
        force controller: centroidalEcmpDistribution
      Bc:
        RLEGEE: [1, 1, 1, 1, 1, 1]
        LLEGEE: [0, 0, 0, 0, 0, 0]
        RARMEE: [1, 1, 1, 1, 1, 1]
      Bm:
        RLEGEE: [0, 0, 0, 0, 0, 0]
        LLEGEE: [1, 1, 1, 1, 1, 1]
        RARMEE: [0, 0, 0, 0, 0, 0]
    -
      control method:
        inverse dynamics controller: fullDynamicsController
        force controller: handWrenchControlAndCentroidalEcmpDistribution
      Bc:
        RLEGEE: [1, 1, 1, 1, 1, 1]
        LLEGEE: [1, 1, 1, 1, 1, 1]
        RARMEE: [1, 1, 1, 1, 1, 1]
      Bm:
        RLEGEE: [0, 0, 0, 0, 0, 0]
        LLEGEE: [0, 0, 0, 0, 0, 0]
        RARMEE: [0, 0, 0, 0, 0, 0]

  sequence:
    -
      twf: 1.
    -
      twf: 1.
      Bm:
        RARMEE: [1, 1, 1, 1, 1, 1]
      rfabs:
        RARMEE: [0.05, -0.1995, 0.4]
      xifabs:
        RARMEE: [-90., 0., -90.]
      # xif:
      #   RARMEE: [0., -60., 0.]
      # xiBf: [0., 45., 0.]
    -
      twf: 1.
      control method:
        # internal force controller: m_internalDistribution
        force controller: handWrenchControlAndCentroidalEcmpDistribution
      # Bc:
      #   RARMEE: [1, 1, 1, 1, 1, 1]
      # Bm:
      #   RARMEE: [0, 0, 0, 0, 0, 0]
      Bc:
        RARMEE: [0, 1, 0, 1, 0, 1]
      Bm:
        RARMEE: [1, 0, 1, 0, 1, 0]
      # cal_Ff:
      #   RARMEE: [-3., 0., 0., 0., 0., 0.]
      # cal_Ff:
      #   RARMEE: [-3., -3., 0., 0., 0., 0.]
      ff:
        RARMEE: [0., 5.0, 0.]
    -
      twf: 1.
      rfabs:
        RARMEE: [0., -0.1995, 0.45]
    -
      twf: 1.
      rfabs:
        RARMEE: [0., -0.1995, 0.35]
    # -
    #   twf: 1.
    #   cal_Ff:
    #     RARMEE: [0.1, 0., 0., 0., 0., 0.]
    # -
    #   twf: 1.
    #   Bc:
    #     LLEGEE: [0, 0, 0, 0, 0, 0]
    #   Bm:
    #     LLEGEE: [1, 1, 1, 1, 1, 1]
    #   cal_Xf:
    #     LLEGEE: [0., 0., 0.03, 0., 0., 0.]
    # -
    #   twf: 1.
    #   rXf: [0., -0.035, 0.]
    #   cal_Ff:
    #     RARMEE: [0., 3., 0., 0., 0., 0.]
