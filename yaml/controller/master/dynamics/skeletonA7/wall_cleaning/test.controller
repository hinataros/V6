# @author Sho Miyahara 2018

angle unit: degree

controller:
  control model: skeletonA7SF
  input: torque
  # driven: mix
  # trigger: check contact

  default:
    control method:
      inverse dynamics controller: fullDynamicsController

      operational space controller: decomposeEndEffectorAcceleration
      motion controller: mixedGeneralizedMomentum

      momentum controller: centroidalDcmMomentum
      force controller: centroidalEcmpDistribution

      torque controller: mixedOpt

    desired value generator:
      DCM: {num: 1, name: CP}
      base rotation: {num: 2, name: CP}

      control node translation:
        # RARMEE: {num: 0, name: CP}
        RARMEE: {name: CPabs}
        LARMEE: {name: CPabs}
        LLEGEE: {num: 3, name: CPabs}
      control node rotation:
        # RARMEE: {num: 0, name: CP}
        RARMEE: {name: CPabs}
        LARMEE: {name: CP}

      control node force:
        RARMEE: {name: CP}

    Bc:
      RLEGEE: [1, 1, 1, 1, 1, 1]
      LLEGEE: [1, 1, 1, 1, 1, 1]

    KX: 3.e+2

    KpwB: 3.e+2
    KdwB: 5.e+1
    # KpwB: 10.
    # KdwB: 5.

    Kpv:
      RARMEE: 3.e+2
      # LARMEE: 3.e+2
      LLEGEE: 3.e+2
    Kpw:
      RARMEE: 3.e+3
      # LARMEE: 3.e+2
      LLEGEE: 3.e+3

    Kdv:
      RARMEE: 1.e+1
      # LARMEE: 5.e+1
      LLEGEE: 1.e+1
    Kdw:
      RARMEE: 1.e+1
      # LARMEE: 5.e+1
      LLEGEE: 1.e+1

    # Kpp: 1.e+1

    # KDlC: 5.e+1
    kDth: &kDthHr 1.e+1
    kDth: &kDthHl 1.e+1

    KDth:
      [0.,0.,0.,0.,0.,0., 0.,0.,0.,0.,0.,0.,
      *kDthHr, *kDthHr, *kDthHr, *kDthHr, *kDthHr, *kDthHr, *kDthHr,
      *kDthHl, *kDthHl, *kDthHl, *kDthHl, *kDthHl, *kDthHl, *kDthHl]

    kthHinit: &kthHinit 1.e+2
    Kthinit:
      [0.,0.,0.,0.,0.,0., 0.,0.,0.,0.,0.,0.,
      0.,0.,0.,0.,0.,0.,0.,
      # *kthHinit, *kthHinit, *kthHinit, *kthHinit, *kthHinit, *kthHinit, *kthHinit,
      *kthHinit, *kthHinit, *kthHinit, *kthHinit, *kthHinit, *kthHinit, *kthHinit]

  state:

  sequence:
    -
      -
        twf: 1.
      -
        twf: 1.
        Bm:
          RARMEE: [1, 1, 1, 1, 1, 1]
        rfabs:
          RARMEE: [0.05, -0.1995, 0.4]
        xifabs:
          RARMEE: [-90., 0., -90.]
        # xif:
        #   RARMEE: [0., -60., 0.]
      -
        twf: 1.
        control method:
          # internal force controller: m_internalDistribution
          force controller: handWrenchControlAndCentroidalEcmpDistribution
        # Bc:
          #   RARMEE: [1, 1, 1, 1, 1, 1]
        # Bm:
          #   RARMEE: [0, 0, 0, 0, 0, 0]
        Bc:
          RARMEE: [0, 1, 0, 1, 0, 1]
        Bm:
          RARMEE: [1, 0, 1, 0, 1, 0]
        # cal_Ff:
        #   RARMEE: [-3., 0., 0., 0., 0., 0.]
        # cal_Ff:
        #   RARMEE: [-3., -3., 0., 0., 0., 0.]
        ff:
          RARMEE: [0., 5., 0.]
      -
        twf: 1.
        rfabs:
          RARMEE: [0.05, -0.1995, 0.45]
      -
        twf: 1.
        rfabs:
          RARMEE: [0.05, -0.1995, 0.35]
      -
        twf: 1.
        rfabs:
          RARMEE: [0.05, -0.1995, 0.45]
      # -
      #   twf: 1.
      #   rfabs:
      #     RARMEE: [0.05, -0.1995, 0.35]
      # -
      #   twf: 1.
      #   rfabs:
      #     RARMEE: [0.05, -0.1995, 0.4]
    -
      -
        twf: 4.
      -
        twf: 1.
        rXf: [0., -0.019417981, 0.]
        # rXf: [0., -0.06, 0.]
        # rXf: [0., -0.06, 0.]
    -
      -
        twf: 1.
      -
        twf: 1.
        xiBf: [-30., 0., 0.]
    -
      -
        twf: 5.
      -
        twf: 1.
        # Bc:
        #   LLEGEE: [0, 0, 0, 0, 0, 0]
        # Bm:
        #   LLEGEE: [1, 1, 1, 1, 1, 1]
        # rfabs:
        #   LLEGEE: [0., 0.01, 0.05]

