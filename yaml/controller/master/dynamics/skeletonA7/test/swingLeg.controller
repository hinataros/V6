# @author Sho Miyahara 2018

angle unit: degree

controller:
  control model: skeletonA7SF
  input: torque
  # driven: mix
  # trigger: check contact

  default:
    # ******** control method ********
    control method:
      inverse dynamics controller: fullDynamicsController
      operational space controller: decomposeEndEffectorAcceleration
      # motion controller: mixedGeneralizedMomentum
      motion controller: rcamd

      momentum controller: centroidalDcmMomentum
      force controller: centroidalEcmpDistribution

      # Force controller: centroidalDistribution
      # Momentum controller: centroidalMomentum

      torque controller: mixedOpt

    # ******** desired value generator ********
    desired value generator:
      DCM: {name: CP}
      base rotation: {num: 0, name: CP}
      control node translation:
        RARMEE: {name: CP}
        # LARMEE: {name: CP}
        LLEGEE: {name: CP}
      control node rotation:
        RARMEE: {name: CPabs}
        # RARMEE: {name: CPabs}
        LARMEE: {name: CPabs}

    feedback controller:
      CoM: dcmControl
    #   DCM: ext

    # ******** initial gain config ********
    KX: 3.e+2
    # KpC: 3.e+2
    # KdC: 5.e+1
    KpwB: 3.e+2
    KdwB: 5.e+1

    Kpv:
      RARMEE: 5.e+2
      LARMEE: 5.e+2
      LLEGEE: 5.e+2
    Kpw:
      RARMEE: 5.e+2
      LARMEE: 5.e+2
      LLEGEE: 5.e+2
    Kdv:
      RARMEE: 5.e+1
      LARMEE: 5.e+1
      LLEGEE: 5.e+1
    Kdw:
      RARMEE: 5.e+1
      LARMEE: 5.e+1
      LLEGEE: 5.e+1

    KDlC: 1.e+1
    # KDth: 1.e+2
    # kDth: &kDthH 0.
    kDth: &kDthH 1.e+1
    KDth:
      [0.,0.,0.,0.,0.,0., 0.,0.,0.,0.,0.,0.,
      *kDthH, *kDthH, *kDthH, *kDthH, *kDthH, *kDthH, *kDthH,
      *kDthH, *kDthH, *kDthH, *kDthH, *kDthH, *kDthH, *kDthH]
    kthHinit: &kthHinit 0.
    # kthHinit: &kthHinit 1.e+2
    Kthinit:
      [0.,0.,0.,0.,0.,0., 0.,0.,0.,0.,0.,0.,
      *kthHinit, *kthHinit, *kthHinit, *kthHinit, *kthHinit, *kthHinit, *kthHinit,
      *kthHinit, *kthHinit, *kthHinit, *kthHinit, *kthHinit, *kthHinit, *kthHinit]

    Bc:
      RLEGEE: [1, 1, 1, 1, 1, 1]
      LLEGEE: [1, 1, 1, 1, 1, 1]
    Bm:
      # LLEGEE: [1, 1, 1, 1, 1, 1]
      # RARMEE: [1, 1, 1, 1, 1, 1]
      # LARMEE: [1, 1, 1, 1, 1, 1]

  sequence:
    # -
    #   twf: 1.
    #   rf:
    #     RARMEE: [0., 0., 0.1]
      # rXf: [0., -0.035, 0.]
    -
      twf: 0.5
      # KDlC: 1.e+2
      rXf: [0., -0.035, 0.]
    -
      twf: 0.5
      Bc:
        LLEGEE: [0, 0, 0, 0, 0, 0]
      Bm:
        LLEGEE: [1, 1, 1, 1, 1, 1]

      rf:
        LLEGEE: [0., 0., 0.03]
    -
      twf: 0.3
      # xiBf: [0., 8., 0.]
      rf:
        LLEGEE: [0.1, 0., 0.03]
