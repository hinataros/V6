# @author Sho Miyahara 2018

Controller:
  Control model: skeletonA7SF
  Input: torque
  # Driven: mix
  # Trigger: check contact

  Default:
    Inverse dynamics controller: fullDynamicsController

    Operational space controller: decomposeEndEffectorAcceleration
    Motion controller: mixedGeneralizedMomentum

    Momentum controller: centroidalDcmMomentum
    Force controller: centroidalEcmpDistribution

    # Momentum controller: centroidalMomentum
    # Force controller: centroidalDistribution

    Torque controller: mixedOpt
    # Torque controller: mixedmixedOpt

    Desired DCM generator: {name: CP}
    Desired base orientation generator: {name: CP}

    Desired control node motion generator:
      # RARMEE: {num: 0, name: CP}
      RARMEE: {num: 0, name: CPabs}
      LARMEE: {num: 0, name: CPabs}
      LLEGEE: {num: 0, name: CP}

    Desired control node force generator:
      RARMEE: {num: 0, name: CP}

    Bc:
      RLEGEE: [1, 1, 1, 1, 1, 1]
      LLEGEE: [1, 1, 1, 1, 1, 1]

    KX: 3.e+2

    KpwB: 3.e+2
    KdwB: 5.e+1
    # KpwB: 10.
    # KdwB: 5.

    Kpv:
      RARMEE: 3.e+2
      # LARMEE: 3.e+2
      LLEGEE: 3.e+2
    Kdv:
      RARMEE: 5.e+1
      # LARMEE: 5.e+1
      LLEGEE: 5.e+1

    # Kpp: 1.e+1

    # KDlC: 5.e+1
    KDth: 1.e+2

  State:
    -
      Inverse dynamics controller: default
      Bc:
        RLEGEE: [0, 0, 0, 0, 0, 0]
        LLEGEE: [0, 0, 0, 0, 0, 0]
        RARMEE: [0, 0, 0, 0, 0, 0]
      Bm:
        RLEGEE: [0, 0, 0, 0, 0, 0]
        LLEGEE: [0, 0, 0, 0, 0, 0]
        RARMEE: [0, 0, 0, 0, 0, 0]
    -
      Inverse dynamics controller: fullDynamicsController
      Force controller: centroidalEcmpDistribution
      Bc:
        RLEGEE: [1, 1, 1, 1, 1, 1]
        LLEGEE: [1, 1, 1, 1, 1, 1]
        RARMEE: [0, 0, 0, 0, 0, 0]
      Bm:
        RLEGEE: [0, 0, 0, 0, 0, 0]
        LLEGEE: [0, 0, 0, 0, 0, 0]
        RARMEE: [0, 0, 0, 0, 0, 0]
    -
      Inverse dynamics controller: fullDynamicsController
      Force controller: centroidalEcmpDistribution
      Bc: &ls
        RLEGEE: [0, 0, 0, 0, 0, 0]
        LLEGEE: [1, 1, 1, 1, 1, 1]
        RARMEE: [0, 0, 0, 0, 0, 0]
      Bm: &rs
        RLEGEE: [1, 1, 1, 1, 1, 1]
        LLEGEE: [0, 0, 0, 0, 0, 0]
        RARMEE: [0, 0, 0, 0, 0, 0]
    -
      Inverse dynamics controller: fullDynamicsController
      Force controller: centroidalEcmpDistribution
      Bc:
        RLEGEE: [1, 1, 1, 1, 1, 1]
        LLEGEE: [0, 0, 0, 0, 0, 0]
        RARMEE: [1, 1, 1, 1, 1, 1]
      Bm:
        RLEGEE: [0, 0, 0, 0, 0, 0]
        LLEGEE: [1, 1, 1, 1, 1, 1]
        RARMEE: [0, 0, 0, 0, 0, 0]
    -
      Inverse dynamics controller: fullDynamicsController
      Force controller: handWrenchControlAndCentroidalEcmpDistribution
      Bc:
        RLEGEE: [1, 1, 1, 1, 1, 1]
        LLEGEE: [1, 1, 1, 1, 1, 1]
        RARMEE: [1, 1, 1, 1, 1, 1]
      Bm:
        RLEGEE: [0, 0, 0, 0, 0, 0]
        LLEGEE: [0, 0, 0, 0, 0, 0]
        RARMEE: [0, 0, 0, 0, 0, 0]

  Sequence:
    -
      twf: 1.
      rXf: [0., -0.035, 0.]
    -
      twf: 1.
      Bm:
        RARMEE: [1, 1, 1, 1, 1, 1]
      cal_Xfabs:
        RARMEE: [0.15, -0.0995, 0.3, 0., -1.570796327, 0.]
    -
      twf: 1.
      Force controller: handWrenchControlAndCentroidalEcmpDistribution
      Bc:
        RARMEE: [1, 1, 1, 1, 1, 1]
      Bm:
        RARMEE: [0, 0, 0, 0, 0, 0]
      cal_Ff:
        RARMEE: [-3., 0., 0., 0., 0., 0.]
    # -
    #   twf: 1.
    #   cal_Ff:
    #     RARMEE: [0.1, 0., 0., 0., 0., 0.]
    -
      twf: 1.
      Bc:
        LLEGEE: [0, 0, 0, 0, 0, 0]
      Bm:
        LLEGEE: [1, 1, 1, 1, 1, 1]
      cal_Xf:
        LLEGEE: [0., 0., 0.03, 0., 0., 0.]
      # cal_Xfabs:
      #   RARMEE: [0.05, -0.20, 0.4, 0., -1.570796327, -1.570796327]
    # -
    #   twf: 1.
    #   rXf: [0., -0.035, 0.]
    #   cal_Ff:
    #     RARMEE: [0., 3., 0., 0., 0., 0.]
